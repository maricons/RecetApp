"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9624],{9624:(E,p,l)=>{l.r(p),l.d(p,{LoginPageModule:()=>R});var _=l(177),c=l(4341),a=l(4742),d=l(5171),u=l(467),h=l(7231),m=l(4262),e=l(4438),M=l(5621),j=l(4796);let F=(()=>{var r;class s{constructor(n){this.alertController=n}presentAlert(n,t,i=["OK"]){var g=this;return(0,u.A)(function*(){yield(yield g.alertController.create({header:n,message:t,buttons:i})).present()})()}}return(r=s).\u0275fac=function(n){return new(n||r)(e.KVO(a.hG))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),s})();function v(r,s){if(1&r){const o=e.RV6();e.qex(0),e.j41(1,"ion-card",4)(2,"ion-card-header")(3,"ion-card-title"),e.EFF(4,"Iniciar Sesi\xf3n"),e.k0s()(),e.j41(5,"ion-card-content")(6,"form",5),e.bIt("ngSubmit",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.login())}),e.j41(7,"ion-item")(8,"ion-label",6),e.EFF(9,"Email"),e.k0s(),e.j41(10,"ion-input",7),e.mxI("ngModelChange",function(t){e.eBV(o);const i=e.XpG();return e.DH7(i.email,t)||(i.email=t),e.Njj(t)}),e.k0s()(),e.j41(11,"ion-item")(12,"ion-label",8),e.EFF(13,"Contrase\xf1a"),e.k0s(),e.j41(14,"ion-input",9),e.mxI("ngModelChange",function(t){e.eBV(o);const i=e.XpG();return e.DH7(i.password,t)||(i.password=t),e.Njj(t)}),e.k0s()(),e.j41(15,"ion-button",10),e.EFF(16,"Ingresar"),e.k0s()(),e.j41(17,"ion-button",11),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.recoverPassword())}),e.EFF(18,"\xbfOlvidaste tu contrase\xf1a?"),e.k0s()()(),e.bVm()}if(2&r){const o=e.XpG();e.R7$(10),e.R50("ngModel",o.email),e.R7$(4),e.R50("ngModel",o.password)}}function P(r,s){if(1&r){const o=e.RV6();e.qex(0),e.j41(1,"ion-card",4)(2,"ion-card-header")(3,"ion-card-title"),e.EFF(4,"Registrarse"),e.k0s()(),e.j41(5,"ion-card-content")(6,"form",5),e.bIt("ngSubmit",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.register(t.email,t.password,t.firstname,t.lastname))}),e.j41(7,"ion-item")(8,"ion-label",8),e.EFF(9,"Email"),e.k0s(),e.j41(10,"ion-input",7),e.mxI("ngModelChange",function(t){e.eBV(o);const i=e.XpG();return e.DH7(i.email,t)||(i.email=t),e.Njj(t)}),e.k0s()(),e.j41(11,"ion-item")(12,"ion-label",8),e.EFF(13,"Contrase\xf1a"),e.k0s(),e.j41(14,"ion-input",9),e.mxI("ngModelChange",function(t){e.eBV(o);const i=e.XpG();return e.DH7(i.password,t)||(i.password=t),e.Njj(t)}),e.k0s()(),e.j41(15,"ion-item")(16,"ion-label",8),e.EFF(17,"Nombre"),e.k0s(),e.j41(18,"ion-input",12),e.mxI("ngModelChange",function(t){e.eBV(o);const i=e.XpG();return e.DH7(i.firstname,t)||(i.firstname=t),e.Njj(t)}),e.k0s()(),e.j41(19,"ion-item")(20,"ion-label",8),e.EFF(21,"Apellido"),e.k0s(),e.j41(22,"ion-input",13),e.mxI("ngModelChange",function(t){e.eBV(o);const i=e.XpG();return e.DH7(i.lastname,t)||(i.lastname=t),e.Njj(t)}),e.k0s()(),e.j41(23,"ion-button",10),e.EFF(24,"Registrarse"),e.k0s()()()(),e.bVm()}if(2&r){const o=e.XpG();e.R7$(10),e.R50("ngModel",o.email),e.R7$(4),e.R50("ngModel",o.password),e.R7$(4),e.R50("ngModel",o.firstname),e.R7$(4),e.R50("ngModel",o.lastname)}}const C=[{path:"",component:(()=>{var r;class s{constructor(n,t,i,g,f){this.firestore=n,this.auth=t,this.router=i,this.authService=g,this.alertService=f,this.authMode="login",this.email="",this.password="",this.firstname="",this.lastname=""}ngOnInit(){}login(){var n=this;return(0,u.A)(function*(){try{yield n.authService.login(n.email,n.password)}catch{n.alertService.presentAlert("Error","Email o contrase\xf1a incorrectos.")}})()}register(){var n=this;return(0,u.A)(function*(){if(n.isValidEmail(n.email)&&n.password&&!(n.password.length<6)&&n.firstname&&n.lastname)try{const i=(yield(0,h.eJ)(n.auth,n.email,n.password)).user,g=(0,m.H9)(n.firestore,`users/${i.uid}`);yield(0,m.BN)(g,{uid:i.uid,email:i.email,firstName:n.firstname,lastName:n.lastname,profilePictureUrl:""}),n.router.navigateByUrl("/tabs/tab1")}catch(t){console.error("Error en el registro:",t),n.alertService.presentAlert("Error","Error al registrar el usuario. Int\xe9ntalo de nuevo.")}else n.alertService.presentAlert("Error","Llena todos los campos.")})()}recoverPassword(){var n=this;return(0,u.A)(function*(){if(n.email)try{yield(0,h.J1)(n.auth,n.email),n.alertService.presentAlert("Recuperaci\xf3n","Se ha enviado un correo electr\xf3nico para recuperar tu contrase\xf1a.")}catch(t){console.error("Error al enviar el correo de recuperaci\xf3n:",t),n.alertService.presentAlert("Error","No encontramos ninguna cuenta con ese correo.")}else n.alertService.presentAlert("Error","Por favor, ingresa tu correo electr\xf3nico.")})()}isValidEmail(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}}return(r=s).\u0275fac=function(n){return new(n||r)(e.rXU(m._7),e.rXU(M.Nj),e.rXU(d.Ix),e.rXU(j.u),e.rXU(F))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-login"]],decls:10,vars:3,consts:[[3,"ngModelChange","ngModel"],["value","login"],["value","register"],[4,"ngIf"],[1,"animate__animated","animate__slideInUpLeft"],[3,"ngSubmit"],["position","floating",2,"padding-bottom","8px"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["position","floating"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit"],["expand","full","color","light",3,"click"],["type","text","name","firstname","required","",3,"ngModelChange","ngModel"],["type","text","name","lastname","required","",3,"ngModelChange","ngModel"]],template:function(n,t){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-segment",0),e.mxI("ngModelChange",function(g){return e.DH7(t.authMode,g)||(t.authMode=g),g}),e.j41(3,"ion-segment-button",1),e.EFF(4," Login "),e.k0s(),e.j41(5,"ion-segment-button",2),e.EFF(6," Registrarse "),e.k0s()()()(),e.j41(7,"ion-content"),e.DNE(8,v,19,2,"ng-container",3)(9,P,25,4,"ng-container",3),e.k0s()),2&n&&(e.R7$(2),e.R50("ngModel",t.authMode),e.R7$(6),e.Y8G("ngIf","login"===t.authMode),e.R7$(),e.Y8G("ngIf","register"===t.authMode))},dependencies:[_.bT,c.qT,c.BC,c.cb,c.YS,c.vS,c.cV,a.Jm,a.b_,a.I9,a.ME,a.tN,a.W9,a.eU,a.$w,a.uz,a.he,a.Gp,a.eP,a.ai,a.Je,a.Gw],styles:['@charset "UTF-8";ion-label[_ngcontent-%COMP%]{padding-bottom:8px}']}),s})()}];let L=(()=>{var r;class s{}return(r=s).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[d.iI.forChild(C),d.iI]}),s})(),R=(()=>{var r;class s{}return(r=s).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[_.MD,c.YN,a.bv,L]}),s})()}}]);