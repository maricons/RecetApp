"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1646],{1646:(x,p,i)=>{i.r(p),i.d(p,{Tab1PageModule:()=>N});var r=i(4742),f=i(177),m=i(4341),v=i(5352),g=i(5171),h=i(467),u=i(4262),T=i(1785),P=i(7905),b=i(4412),e=i(4438),C=i(5621);function M(n,c){if(1&n){const s=e.RV6();e.j41(0,"ion-col",4)(1,"ion-card",5),e.bIt("click",function(){const o=e.eBV(s).$implicit,a=e.XpG();return e.Njj(a.openRecipeDetail(o))}),e.nrm(2,"ion-img",6),e.j41(3,"ion-card-header")(4,"ion-card-title",7)(5,"h6"),e.EFF(6),e.k0s()()(),e.j41(7,"ion-card-content"),e.nrm(8,"ion-icon",8),e.j41(9,"span",9),e.EFF(10),e.k0s()()()()}if(2&n){const s=c.$implicit,t=e.XpG();e.R7$(2),e.Y8G("src",s.imagen),e.R7$(4),e.JRh(s.titulo),e.R7$(4),e.JRh(t.formatTiempo(s.minutos))}}const R=[{path:"",component:(()=>{var n;class c{constructor(t,o,a,l){this.router=t,this.modalController=o,this.auth=a,this.firestore=l,this.recetas=[],this.filteredRecetas=[],this.searchTerm="",this.seleccionando=!1,this.authorNames=new Map}ngOnInit(){this.loadRecipes()}loadRecipes(){var t=this;return(0,h.A)(function*(){try{const o=(0,u.rJ)(t.firestore,"recetas"),a=yield(0,u.GG)(o);t.recetas=a.docs.map(l=>({...l.data(),id:l.id,selected:!1})),t.filteredRecetas=t.recetas,t.loadAuthorNames()}catch(o){console.error("Error loading recipes:",o)}})()}loadAuthorNames(){var t=this;return(0,h.A)(function*(){for(const o of t.recetas){const a=o.autorId;if(a&&!t.authorNames.has(a)){const l=(0,u.H9)(t.firestore,`users/${a}`),d=(yield(0,u.x7)(l)).data();t.authorNames.set(a,new b.t(`${(null==d?void 0:d.firstName)||"Desconocido"} ${(null==d?void 0:d.lastName)||""}`).asObservable())}}})()}getAuthorName(t){return this.authorNames.get(t)||new b.t("Desconocido").asObservable()}getAuthorPhotoUrl(t){return"ruta/a/la/foto-del-autor.jpg"}filterRecipes(){const t=this.searchTerm.toLowerCase();this.filteredRecetas=this.recetas.filter(o=>o.titulo.toLowerCase().includes(t)||o.descripcion.toLowerCase().includes(t))}openNewRecipeModal(){var t=this;return(0,h.A)(function*(){const o=yield t.modalController.create({component:P.V});yield o.present(),yield o.onDidDismiss(),t.loadRecipes()})()}openRecipeDetail(t){var o=this;return(0,h.A)(function*(){return yield(yield o.modalController.create({component:T.G,componentProps:{receta:t}})).present()})()}formatTiempo(t){return t>=60?`${Math.floor(t/60)}h ${t%60}m`:`${t}m`}}return(n=c).\u0275fac=function(t){return new(t||n)(e.rXU(g.Ix),e.rXU(r.W3),e.rXU(C.Nj),e.rXU(u._7))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-tab1"]],decls:9,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],["placeholder","Buscar receta...",1,"round-searchbar",3,"ngModelChange","ionInput","ngModel"],["size","6",4,"ngFor","ngForOf"],["size","6"],["color","light",3,"click"],[2,"height","5rem","width","100%","object-fit","cover","overflow","hidden",3,"src"],[2,"overflow","hidden","white-space","nowrap","text-overflow","ellipsis"],["name","time-outline",1,"icon"],[1,"text"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Recetas de la Comunidad"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-searchbar",2),e.mxI("ngModelChange",function(l){return e.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),e.bIt("ionInput",function(){return o.filterRecipes()}),e.k0s(),e.j41(6,"ion-grid")(7,"ion-row"),e.DNE(8,M,11,3,"ion-col",3),e.k0s()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(),e.R50("ngModel",o.searchTerm),e.R7$(3),e.Y8G("ngForOf",o.filteredRecetas))},dependencies:[r.b_,r.I9,r.ME,r.tN,r.hU,r.W9,r.lO,r.eU,r.iq,r.KW,r.ln,r.S1,r.BC,r.ai,r.Gw,f.Sq,m.BC,m.vS],styles:['@charset "UTF-8";.new-recipes-title[_ngcontent-%COMP%]{padding:8px;text-align:left;margin-top:8px;margin-bottom:8px}.new-recipes-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#333}.round-searchbar[_ngcontent-%COMP%]{--border-radius: 20px;--background: #f4f4f4;--box-shadow: none;--ion-color-light-shade: transparent}.no-border-card[_ngcontent-%COMP%]{--border-width: 0;box-shadow:none}.rounded-img[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.icon[_ngcontent-%COMP%]{display:inline-block;margin-right:3px;font-size:15px;vertical-align:middle}.text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.selected-card[_ngcontent-%COMP%]{border:2px solid #4CAF50;background-color:#4caf501a}']}),c})()}];let y=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[g.iI.forChild(R),g.iI]}),c})(),N=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[r.bv,f.MD,m.YN,v.S,y]}),c})()}}]);